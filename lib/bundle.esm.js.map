{"version":3,"file":"bundle.esm.js","sources":["../src/error_schemas.ts","../src/error_handler.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const commonExceptionResponseSchema = z.object({\n  message: z.string(),\n  error: z\n    .object({\n      name: z.string(),\n      message: z.string(),\n      stack: z.string().optional(),\n    })\n    .optional(),\n});\n\nexport type CommonExceptionResponse = z.infer<typeof commonExceptionResponseSchema>;\n","import { CommonExceptionResponse, commonExceptionResponseSchema } from \"@/error_schemas\";\n\nexport const errorHandler = (message: string, error?: unknown): CommonExceptionResponse => {\n  const errorRes: CommonExceptionResponse = {\n    message,\n  };\n  if (!error) {\n    return commonExceptionResponseSchema.parse(errorRes);\n  }\n  if (error instanceof Error) {\n    errorRes.error = {\n      name: error.name,\n      message: error.message,\n      stack: error.stack || \"\",\n    };\n  } else if (typeof error === \"string\") {\n    errorRes.error = {\n      name: \"string_error\",\n      message: error,\n    };\n  } else if (typeof error === \"object\" && error !== null) {\n    errorRes.error = {\n      name: \"object_error\",\n      message: JSON.stringify(error),\n    };\n  } else {\n    errorRes.error = {\n      name: \"unknown_error\",\n      message: \"An unknown error occurred\",\n    };\n  }\n  return commonExceptionResponseSchema.parse(errorRes);\n};\n"],"names":[],"mappings":";;AAEO,MAAM,6BAA6B,GAAG,CAAC,CAAC,MAAM,CAAC;AACpD,IAAA,OAAO,EAAE,CAAC,CAAC,MAAM,EAAE;AACnB,IAAA,KAAK,EAAE;AACJ,SAAA,MAAM,CAAC;AACN,QAAA,IAAI,EAAE,CAAC,CAAC,MAAM,EAAE;AAChB,QAAA,OAAO,EAAE,CAAC,CAAC,MAAM,EAAE;AACnB,QAAA,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;KAC7B;AACA,SAAA,QAAQ,EAAE;AACd,CAAA,CAAC;;MCTW,YAAY,GAAG,CAAC,OAAe,EAAE,KAAe,KAA6B;AACxF,IAAA,MAAM,QAAQ,GAA4B;QACxC,OAAO;KACR;IACD,IAAI,CAAC,KAAK,EAAE;AACV,QAAA,OAAO,6BAA6B,CAAC,KAAK,CAAC,QAAQ,CAAC;;AAEtD,IAAA,IAAI,KAAK,YAAY,KAAK,EAAE;QAC1B,QAAQ,CAAC,KAAK,GAAG;YACf,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,OAAO,EAAE,KAAK,CAAC,OAAO;AACtB,YAAA,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,EAAE;SACzB;;AACI,SAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;QACpC,QAAQ,CAAC,KAAK,GAAG;AACf,YAAA,IAAI,EAAE,cAAc;AACpB,YAAA,OAAO,EAAE,KAAK;SACf;;SACI,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI,EAAE;QACtD,QAAQ,CAAC,KAAK,GAAG;AACf,YAAA,IAAI,EAAE,cAAc;AACpB,YAAA,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;SAC/B;;SACI;QACL,QAAQ,CAAC,KAAK,GAAG;AACf,YAAA,IAAI,EAAE,eAAe;AACrB,YAAA,OAAO,EAAE,2BAA2B;SACrC;;AAEH,IAAA,OAAO,6BAA6B,CAAC,KAAK,CAAC,QAAQ,CAAC;AACtD;;;;"}